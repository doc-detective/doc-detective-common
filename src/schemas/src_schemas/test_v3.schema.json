{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "test",
  "type": "object",
  "description": "A Doc Detective test.",
  "properties": {
    "testId": {
      "type": "string",
      "description": "Unique identifier for the test."
    },
    "description": {
      "type": "string",
      "description": "Description of the test."
    },
    "contentPath": {
      "type": "string",
      "description": "Path to the content that the test is associated with."
    },
    "detectSteps": {
      "type": "boolean",
      "description": "Whether or not to detect steps in input files based on markup regex.",
      "default": true
    },
    "runOn": {
      "type": "array",
      "description": "Contexts to run the test in. Overrides contexts defined at the config and spec levels.",
      "items": {
        "oneOf": [
          {
            "$ref": "context_v3.schema.json#"
          }
        ]
      }
    },
    "openApi": {
      "type": "array",
      "items": {
        "allOf": [
          {
            "$ref": "openApi_v3.schema.json#"
          },
          {
            "type": "object",
            "not": {
              "required": ["operationId"]
            },
            "required": ["descriptionName", "descriptionPath"]
          }
        ]
      }
    },
    "before": {
      "type": "string",
      "description": "Path to a test specification to perform before this test, while maintaining this test's context. Useful for setting up testing environments. Only the `steps` property is used from the first test in the setup spec."
    },
    "after": {
      "type": "string",
      "description": "Path to a test specification to perform after this test, while maintaining this test's context. Useful for cleaning up testing environments. Only the `steps` property is used from the first test in the cleanup spec."
    },
    "steps": {
      "description": "Steps to perform as part of the test. Performed in the sequence defined. If one or more actions fail, the test fails. By default, if a step fails, the test stops and the remaining steps are not executed.",
      "type": "array",
      "minItems": 1,
      "items": {
        "$ref": "step_v3.schema.json#"
      }
    }
  },
  "dynamicDefaults": {
    "testId": "uuid"
  },
  "required": ["steps"],
  "additionalProperties": false,
  "examples": [
    {
      "steps": [
        {
          "checkLink": "https://www.duckduckgo.com"
        }
      ]
    }
  ]
}
